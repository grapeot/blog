Title: 用3D打印将Leica SL镜头转接到天文相机的一些尝试
Category: Life
Tags: Photography, 3D print, Leica, Chinese
Date: 2019-09-18 20:00:00

作为一个数毛党老法师，我一直非常喜欢Leica SL的镜头。但SL的镜头一直以来只能直接接在SL机身上（最近马徕松L卡口联盟成立以后会好些）。从功能的角度来看SL这个相机什么都好（健身器材什么的我们以后再黑），就是有个非常傻逼的一点是降噪关不掉。和负责这个产品的PM交流以后确认这是个feature不是个bug。。他的观点是，除非你拍深空自己拍暗场降噪，否则我们机内的降噪算法比大多数后期算法肯定更好。作为一个也拍深空的老法师，这就不能忍了。经常一顿操作猛如虎，曝光3小时只收到1个半小时的片子。同时考虑到SL有红外滤镜，拍摄比如巴德环的时候并不给力，所以就想着有没有办法把SL 280mm的镜头转接到T2口的天文相机上面去。遗憾的是，在联系了和徕卡的支持人员以后，官方的答复是没有官方的转接环。ebay上也搜不到相关的转接环。看来只能自己做了。

在做任何转接环之前，我们都需要考虑法兰距的问题。只有天文相机的法兰距比Leica SL的法兰距小的情况下，这个转接的镜头才能在无穷远处合焦。我用的天文相机是ZWO ASI183MC，法兰距只有6.5mm，Leica SL没有官方标注，但量了一下从镜头的卡口到CMOS差不多是12mm，感觉还是有戏的。为了保险起见，我还是做了一个小实验，在一个黑屋子里面把天文相机放到镜头的后面，看能不能通过手动“对焦”来实现合焦。但诡异的是，这种情况下怎么都没办法合焦。这就比较奇怪了。

这里牵扯到另一个问题是镜头本身如何对焦。这个280mm的镜头是内对焦，靠的是浮动镜片的移动。而且对焦不是通过机械旋钮，而是通过电子系统来完成的。我显然没有能力逆向相机的通信协议进而控制变焦系统，所以打算先用相机连着镜头对好焦，然后把镜头卸下来，装到天文相机上面去。卡了一段时间以后，我发现每次相机关机的时候镜头都会响一声。如果此时对着镜头看的话会看见里面有个镜片有一些移动。因为我们测量出来法兰距是适合的，但结果却无法合焦，所以就比较怀疑这一步相机做了一些额外的动作破坏了我们的对焦。猜测可能是关闭防抖把镜片复位到一个比较适合运输的安全位置？所以我就尝试了在相机开机的时候直接拔镜头，但还是听见了这个声音而且也无法合焦。。看来只能开大了。。直接拔电池。哎，结果一下就可以合焦了。但此时如果轻微晃动镜头的话的确能感觉到里面有什么东西撞来撞去的，看来让镜头正常关机是必要的。但因为我的镜头买的是二手，反正没有保修，而且轻拿轻放猜测没有关系。如果你们有保修的还是谨慎一点比较好，坏了我不负责蛤。

验证了可行性以后，就可以开始建模了。老规矩OpenSCAD开起。直接引用螺纹库，设置直径42mm，螺距0.75mm就把天文相机那边搞定了。有了之前逆向L卡口的经验，镜头盖端的逆向也比较顺利，游标卡尺一顿量就好。这里有个小问题是转接环的长度如何确定。这里只要大略测量一下然后迭代就可以了。因为螺纹毕竟是可以拧的，所以在对焦方面我们还是有一定的自由度。比较理想的情况是做一个helical focuser。但考虑到对焦的稳定性，这里我们还是用了固定长度，保证只要摄影相机上合焦，转接到天文相机上就还是合焦的。

从3D打印的角度来说这里也不需要support。设好公差，PLA开打。

![3D model](/images/3d-print-sl-lens-model.jpg)

打印过程是比较顺利的。出来以后装上严丝合缝。红色的是天文相机。

![Print result](/images/3d-print-sl-lens-result.jpg)

接下来就是实地测试了。因为最近的一个晴天可能还在半年以后（开光定律），所以我们用了一个大约十米外的电线杆测试。iphone的视角如下：

![Test scene](/images/3d-print-sl-lens-test-scene.jpg)

我们想拍摄的就是那个电线杆。装上天文相机直接吓了一跳，正好有个虫在上面爬，看的清清楚楚。。[这](https://www.bilibili.com/video/av94830860/)是一个视频，大气抖动明显可见。。这只是280mm的镜头鸭，不是什么天文望远镜不由感慨量子效率还是很重要的。上面那张图是Leica Q拍的，f/1.7 1/15s的参数，电线杆的亮度和这个相机系统在f/4 1/20s拍的结果差不多。下面是合成的照片（lucky imaging，为了弱化大气抖动的影响）。

![Sample image](/images/3d-print-sl-lens-result-photo.jpg)

感觉细节啥的都蛮好，说明光轴比较正，合焦也很正常。当然这也得益于这个天文相机靶面比较小（1寸），所以对误差比较不敏感。有一些杂色这是lucky imageing合成和debayer的问题，调整设置可以解决，和转接环没有关系这里就不讨论了。

下面一步就是加入Helical focuser。感谢之前老板的赞赏，我也买了激光测距传感器。二者结合加上一些电子控制就可以做自动对焦了。有了自动对焦就可以做便携612了。