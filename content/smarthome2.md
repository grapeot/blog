Title: 自己动手改造智能家居生活（二）
Category: Computing
Date: 2016-10-05 09:00
Tags: SmartHome, Chinese

一个月前介绍了当前的[智能家居生活](https://zhuanlan.zhihu.com/p/22247615)，最近一个月又有了一些新的探索和心得。

首先是一些新的设备加入进来了，现在能控制的东西更多了。

* 温控器。因为家里的暖气比较老，是市电直接接上电暖气，不能直接用Echobee/Nest之类智能温控器。网上有一些自己装继电器和变压器，把强电变成弱电控制的改造方法，但问了一圈电工都不愿意接这个活，这搞得我也不敢动手了。。后来发现有一个加拿大公司做了这种强电直接控制电暖气的[智能温控](https://casaconnect.com/en/caleo/)，买来以后发现又便宜又好用。于是现在可以直接用手机/IFTTT控制家里每个房间的温度了。它还有温度和湿度的传感器，还可以和除湿机加湿器配合起来用。
* 智能门锁。我用的是August。其实就是一个可以用手机遥控开关门的小东西，可以和IFTTT/Echo/Siri接起来。很贴心的一个功能是自动开门。当它发现你离开家200米以外又回来，并且蓝牙连上了它鉴权通过以后，它就会自动开门。实际生活中感觉这个功能很好用，尤其是推着自行车，手上拿着包裹，嘴里还叼着信的时候，不用把所有东西都放下来拿钥匙开门实在幸福感爆棚。注意有个坑是它的Android App很难连上，自动开门也不太work。iPhone就无比顺滑。Amazon上带HomeKit的版本评价比不带HomeKit的版本评价也更高。
* iBeacon。这个东西偏geek一点(如下图)。它本质上是个蓝牙小广播站，不停地向外广播我在这里我在这里，我的发射信号强度是这么强。所以iphone就可以知道大概离它有多远，并且可以用这个信号做一个geo-fence。我买了几个。具体的应用是到家了手机会知道，可以做一些动作，到车上了就可以做一些动作等等。目前还在探索有什么应用。网上有人做了一个精确的室内定位系统，感觉也挺有意思的。但我自己稍微试了一下，发现买的几刀的传感器距离测定实在是不准，连在哪个房间里都不太分得出来。
* Amazon Echo。这是个大杀器！智能家居目前还停留在遥控阶段。基本上能用手机遥控的东西就叫智能家居了。但很多时候用手机遥控（甚至Siri）都还是太慢，并不方便。但有了Echo就好像有个管家一样，只要说句话就行了。这是个质的变化。我的感受是之前一直在怀疑我搞这么多智(yao)能(kong)家居有什么卵用，买了Echo才觉得我靠还是值的。更具体的感受可以参见这个回答如何评价 Amazon Echo？ - grapeot 的回答。现在家里设置了各种咒语，比如gou是开窗帘，li是开客厅暖气，guo是开灯，jia是锁门。等以后人类灭绝，新生代人类要是成长在这个环境里（假设Echo还能用。。），会不会进入各种咒语的高魔社会。。

这段时间也一直在怀疑这个智能家居到底有什么卵用。经过一些探索，有了一些感想：

* 从更方便到更安全。搞这个东西的初衷就是懒。躺在床上不想下床关窗帘，看完恐怖片希望起夜的时候灯能从床上打开。但最近美国有一些入室抢劫的新闻，上网搜了一下保证安全的一些要点，发现重要的一条就是让你家看起来比隔壁更难抢（23333）。比如夜里把院子里的灯打开（没人想在光亮下撬门），养狗或者装动作/门窗警报系统等等。有了智能家居，现在可以很方便的把外面的灯从日落开始打开，日出关掉。警报系统在说Alexa trigger good night的时候自动开启，日出关掉。这样让家里更安全是我当时没想到的一个好处。
* 用IFTTT集中控制。虽然市场上有很多集中控制智能家具的尝试（HomeKit，Google Home，Sumsung SmartThings），但目前兼容性最好的还是IFTTT。而且这东西一两种智能组件没啥用，你要能集中控制，把传感器和动作器串起来才能做出来有意思的东西。举个栗子，我的暖气因为是电暖气，为了最大化热效率需要有个电风扇在那吹（囧囧囧），如果不用IFTTT，我需要在手机上打开暖气app，先把暖气打开，然后打开Wemo app，把电风扇打开。弄完半分钟过去了。但如果设了一个IFTTT trigger一下做这两件事情，只要在Launch Center里面划一下手指，或者跟Alexa说一声trigger li就好了，一两秒的事情。而且还能完成一系列复杂动作，比如关灯开暖气开警报等等。
* 从遥控到自动化。如果光是遥控，哪怕是语音控制的话，智能家居也不是太有意思。一些每天都要做的事情完全可以交给自动化的系统来做，解放自己的脑容量。比如前面说的天黑开院子里的灯，开暖气的时候自动开电风扇。而且这个自动化不用局限于家居本身。iPhone有个app叫Workflow，可以做一些有意思的自动化。我现在每次下班进入车里的时候，geo-fence会被iBeacon触发，自动运行一个workflow。它会调用苹果地图算出来回家还要多久，给老婆发短信汇报，然后打开网易云音乐开始放歌。要想加入自动开暖气等等功能也是很容易做到的。
* 从自动化到智能化。智能化不是说有了语音识别就叫智能化了。我这里说的智能化主要是引入更复杂的逻辑控制。比如上面举的例子，如果我是早上去上班，一打开车门结果手机自动给老婆发短信0分钟后到家，岂不很傻逼。这个目前我还是手动控制，但通过改造IFTTT还是可以加入判断逻辑的，比如看GPS坐标决定要不要发短信，看气温决定要不要自动开暖气等等。目前IFTTT本身不支持任何逻辑，但它支持调用外部Web接口，以及监听web requests，可玩性就高了很多。目前我实现了一个[延时接口](https://yage.ai/adding-a-delay-to-ifttt-recipes.html)，用来在跟Alexa道晚安之后定时15分钟自动关灯。更详细的用法可以参考[这个blog](https://yage.ai/adding-a-delay-to-ifttt-recipes.html)。

总的来说，在探索[智能家居](https://yage.ai/zi-ji-dong-shou-gai-zao-zhi-neng-jia-ju-sheng-huo.html)的不归路上越走越远，现在家里有快20个设备连在IFTTT上，也有了几十条自动化的recipe。现在我也不知道这个东西会有什么用，但总有种感觉它会让生活变得非常不同，甚至有很多商业化的空间。Stay tuned。:)