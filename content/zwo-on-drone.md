Title: 机炮才是无人机的浪漫
Date: 2022-05-29 00:19
Category: Computing
Tags: Photography, Drone, ZWO
Slug: zwo-on-drone

在观望比较许久之后，我终于被大佬们的长焦样张诱惑，买了一个大疆的御3。长焦才是无人机的正确用法！但拿到手以后，虽然早有心理准备，还是被长焦头气得不轻：明明是1/2寸的优秀硬件，但有各种限制，不支持RAW，没有DLog，没有可变光圈，不能自己调ISO，不能控制快门速度，只能P档直出。我要你何用！既然哈苏不争气，于是就想着能不能不要自带的相机，把无人机只当一个载具使用，背一个真正的相机上去拍照。
 
所以我就用佳能R5试了一下，诶，竟然真的可以。而且装载极其简单，就用的之前用来固定全景相机的橡皮筋底座。只是这次装了个正儿八经的全幅相机。意外的是御3的载重极限非常高，即使在装了R5+VR镜头1100g左右的载荷，也可以正常稳定悬浮。只是此时螺旋桨的噪声非常大，感觉电机还是有点吃力。虽然听说网上有人装到了2kg，但为了稳妥起见，我还是决定把所有负载控制在500g左右。同时因为大疆已经有了1/2寸，160mm等效焦距的相机，我们希望在器材上有所突破，最好可以实现1寸，320mm等效焦距的相机。这样加上RAW的支持，画质上应该可以碾压原生长焦。
 
![Canon R5 body on a drone](/images/zwo_drone_r5_body.jpg) 

![Canon R5 body + lens on a drone](/images/zwo_drone_r5_lens.jpg) 

![Canon R5 body + lens weight](/images/zwo_drone_r5_weight.jpg) 
 
但装一台相机上天，说起来简单，要解决的问题还是很多的。虽然无人机风光摄影可以把对焦定死在无穷远，条件所限我们也可以不装电动云台，改为手动调整拍摄角度。但如何实时预览画面，控制相机参数，按下快门拍照还是绕不过去的坎。还有一个是减重的需求，一个完整的相机系统，尤其是长焦系统，包括图传，主控和电源，如何限制在500g以内也并不简单。此时一个绝佳的选择就出现了——天文相机。我用的是ZWO的非制冷相机，这种相机体积小巧，重量轻，USB接口所以可以直接从主控单板机上面取电，电池的重量也省下来了。同时因为是天文相机，暗光性能极佳，所以即使没有云台减震，也有很大的余量来压缩快门速度来获得稳定的图像。
 
有了这个基本思路以后，下面就是镜头的选择了。覆盖1寸传感器的CS口镜头，尤其是全开画质尚可的工业镜头一方面贵，一方面也不轻。因此我们选择了便宜大碗的大画幅镜头，因为大画幅镜头没有镜筒，所以可以自己3D打印塑料镜筒来减重。到这里整个硬件系统基本上就定型了。主控方面，我一开始想用ZWO的ASIAir Plus盒子，因为自己带Wifi天线和图传，预览和控制的手机app都是现成的，所以基本上就是魔术贴绑上去，USB口接上相机就好。但可惜盒子只支持12V DC输入，无人机上只有USB-C电源，所以这里我选用了树莓派4来做主控，负责供电，图传和控制。此外，一个冷知识：御3鸡屁股上面那个USB-C口是可以取电的！所以直接用一根USB-C线连上树莓派就好了。
 
下面就是3D打印，编写程序了。整个系统的重量限制在500g左右，试飞一遍成功：
 
![ZWO camera aseembly weight](/images/zwo_drone_weight.jpg) 
 
![ZWO camera on a drone](/images/zwo_drone_2.jpg) 
 
![ZWO camera on a drone](/images/zwo_drone_1.jpg) 
 
 
画质也非常好。这个是拍摄同一个楼，大疆自己的广角镜头的局部放大（垃圾哈苏）：
 
![DJI wide angle photo](/images/zwo_drone_wide_angle.png) 
 
大疆长焦镜头的局部放大，长焦镜头虽然可以拍到楼房，但一方面糊，一方面涂抹感严重：

![DJI zoom photo](/images/zwo_drone_zoom.png) 
 
机载ZWO相机的局部放大，分辨率高了很多，可以认出来楼上面的字母W：
 
![ZWO photo](/images/zwo_drone_zwo.png) 
 
不仅画质碾压，同时也解锁了所有功能，可以输出RAW，支持M档等等。这里因为我用的是ZWO的533MM单色相机，所以是黑白的。也有更便宜的彩色型号。
 
所以我们现在就有了一个真正的相机，会飞的鸭苏了！其实这还有另一个使用思路，就是相机往往很重，携带不便，尤其是负重登山的时候。如果带个无人机帮你背器材，岂不会轻松很多！这里完全可以用御3的全向避障+智能跟随，因为续航也很长（网上有人测出来负重可以续航25min），还是很实用的！（狗头