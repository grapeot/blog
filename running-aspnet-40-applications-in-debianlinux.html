<!DOCTYPE html>
<html lang="en">
<head>
        
        <title>Running ASP.NET 4.0 applications in Debian/Linux</title>
        <meta charset="utf-8" />
                                <link href="http://grapeot.me/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Computing Life Atom Feed" />
                        <link href="http://grapeot.me/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Computing Life RSS Feed" />
                        <link href="http://grapeot.me/feeds/computing.atom.xml" type="application/atom+xml" rel="alternate" title="Computing Life Categories Atom Feed" />
                        <link href="http://grapeot.me/feeds/computing.rss.xml" type="application/rss+xml" rel="alternate" title="Computing Life Categories RSS Feed" />
                                        
        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="http://grapeot.me/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="http://grapeot.me/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="http://grapeot.me/theme/pygment.css" />

        <script src="http://grapeot.me/theme/js/libs/modernizr-2.6.2.min.js"></script>


                        <script type="text/javascript">
                  var _gaq = _gaq || [];
                  _gaq.push(['_setAccount', 'UA-20477090-1']);
                  _gaq.push(['_setDomainName', 'grapeot.me']);
                  _gaq.push(['_trackPageview']);
                  (function() {
                   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                   })();
              </script>
          
        </head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="http://grapeot.me">Computing Life <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="http://grapeot.me">Home</a></li>

                            <li><a href="/archives.html">Archives</a></li>
                            <li><a href="/pages/feed.html">Subscribe</a></li>
                            <li><a href="http://lab.grapeot.me/">Lab</a></li>
                                                      <li><a href="http://grapeot.me/pages/about.html">About</a></li>
                          
              </ul>
            </div>

          <section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="http://grapeot.me/running-aspnet-40-applications-in-debianlinux.html" rel="bookmark"
                   title="Permalink to Running ASP.NET 4.0 applications in Debian/Linux">Running ASP.NET 4.0 applications in Debian/Linux</a></h2>
                      
            </header>
            <footer class="post-info">
              <abbr class="published" title="2011-12-23T11:33:00">
                Fri 23 December 2011
              </abbr>
                            <address class="vcard author">
                By <a class="url fn" href="http://grapeot.me/author/yan-wang.html">Yan Wang</a>
              </address>
                          </footer><!-- /.post-info -->
            <div class="entry-content">
              <h3>Introduction</h3>
<p>Made some trials to migrate this server to Linux recently. The main reasons are 
1) The Ethernet adapter doesn’t have proper driver for Windows Server 2008, but there are reports saying it’ll work out of the box in Ubuntu 11.04+. (kind of weird) 
2) Windows GUI is consuming much resource, and I suspect Linux without GUI may solve this problem.</p>
<p>After some (actually quite a few) trails, basic conclusion is Windows is still the best place to develop/debug/deploy .NET applications. Pure CLI Linux seems still not suitable to deploy Mono applications, mainly because of lack of debugging capabilities.</p>
<p>But a good thing is, finally I’ve figured out how to run ASP.NET 4.0 applications in Linux environment, and gained some experiences about migrating .NET applications to Linux + Mono. Here let’s see how to do it in Debian. Other distributions should be similar, and even simpler considering we don’t have binaries for latest Mono supporting ASP.NET 4.0 in stable repository of Debian.</p>
<h3>nginx + FastCGI configuration</h3>
<p>The basic idea is to use nginx + FastCGI server of Mono to build a dynamic server environment. Considering Debian stable version doesn’t have an up-to-date repository, we need to compile nginx, Mono (2.10+), and xsp from source. The compilation process is rather standard. <a href="http://extralogical.net/articles/howto-compile-nginx-passenger.html">This post</a> may provide good practices. <a href="http://www.mono-project.com/FastCGI_Nginx">Mono website</a> provides an example about how to configure nginx and FastCGI. But I’d suggest you to read <a href="http://www.mono-project.com/FastCGI">this article</a> about basic concepts of FastCGI before making any modifications on the example. Because I wasted quite a lot of time to figure out the parameters feeding fastcgi-mono-server4.</p>
<p>There are also tools written by others to simplify this process. For example, <a href="https://code.google.com/p/nginx-init-ubuntu/">this script</a> (for Ubuntu, but will also work in Debian with small tweaks) will grant you auto start feature of nginx directly compiled from source. And <a href="https://gist.github.com/philippkueng/1074516">this script</a> provides some clues about how to use Apache and Mod_mono to establish running environment for Mono 2.10.</p>
<h3>Application configuration</h3>
<p>But the problem doesn’t stop here, especially if we are trying to migrate .NET applications to Mono. One serious issue is the difference of file systems of Linux and Windows. Windows simply ignores all the letter cases in the path, while Linux doesn’t, i.e. Bin != bin in Linux. Fortunately, Mono provides a simple solution or switch <a href="http://www.mono-project.com/IOMap">IOMap</a>.</p>
<p>I did succeed in migrating some simple applications. But DotNetBlogEngine seems not that easy. I can make the homepage display normally, but clicking any link will cause a 500 internal error. Don’t know what’s going on inside because I even cannot find error logs (not the logs for nginx, but for FastCGI). For suggestions about more general migration from .NET to Mono, Novell has <a href="http://www.novell.com/connectionmagazine/2010/02/mono_tools.html">a good article</a> and several useful tools.</p>
<h3>Windows or Linux on this server?</h3>
<p>As mentioned before, Linux may (probably) bring better performance and more reliable network. But blog transfer is rather miserable, considering currently there are no perfect ways to transfer from DotNetBlogEngine to WordPress (preserving all the posts, comments, tags, descriptions, links, etc.) and MetaWeblogAPI cannot capture all necessary info either. BlogML may be a solution, but will still drop all the tags and cannot handle links well. And given I also need to host demos written in .NET 4.0 on this server, maybe keeping it as it is is the best solution now.</p>
            </div><!-- /.entry-content -->
                        <div class="comments">
              <h3>Comments</h3>
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                var disqus_identifier = "running-aspnet-40-applications-in-debianlinux.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://computinglife.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
            </div>
            

        </div><!-- /.eleven.columns -->
        
     <div class="three columns">

<h4>Pages</h4>

 <ul>
        <li><a href="/archives.html">Archives</a></li>
        <li><a href="/pages/feed.html">Subscribe</a></li>
        <li><a href="http://lab.grapeot.me/">Lab</a></li>
              <li><a href="http://grapeot.me/pages/about.html">About</a></li>
        </ul>

<h4>Categories</h4>
<ul>
			<li><a href="http://grapeot.me/category/alive.html">Alive</a></li>
			<li><a href="http://grapeot.me/category/computing.html">Computing</a></li>
			<li><a href="http://grapeot.me/category/life.html">Life</a></li>
	</ul>


<h4>Tags</h4>
	<ul>
		    <li class="tag-4"><a href="http://grapeot.me/tag/kinect.html">Kinect</a></li>
		    <li class="tag-2"><a href="http://grapeot.me/tag/github.html">github</a></li>
		    <li class="tag-1"><a href="http://grapeot.me/tag/phd.html">PhD</a></li>
		    <li class="tag-2"><a href="http://grapeot.me/tag/linux.html">Linux</a></li>
		    <li class="tag-4"><a href="http://grapeot.me/tag/zz.html">zz</a></li>
		    <li class="tag-4"><a href="http://grapeot.me/tag/time.html">Time</a></li>
		    <li class="tag-4"><a href="http://grapeot.me/tag/image.html">Image</a></li>
		    <li class="tag-2"><a href="http://grapeot.me/tag/math.html">Math</a></li>
		    <li class="tag-4"><a href="http://grapeot.me/tag/cygwin.html">Cygwin</a></li>
		    <li class="tag-4"><a href="http://grapeot.me/tag/travel.html">Travel</a></li>
	</ul>


<nav class="widget">
  <h4>Social</h4>
  <ul>
      <li><a href="https://www.facebook.com/YansReaderShareItems">FB Shared Items (Chinese)</a></li>
      <li><a href="http://weibo.com/grapeot/">Weibo (Chinese)</a></li>
      <li><a href="https://github.com/grapeot/">Github</a></li>
    </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->

       <div class="container.nopad bg">

        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">

                                <li><div class="btn primary"><a href="https://github.com/grapeot/blog/" target="_blank">Github</a></div></li>
                
                
                
                
              </ul>
            </div>
          </div>
        </footer>

    </div>

  <script type="text/javascript">
    var disqus_shortname = 'computinglife';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
  <script src="http://grapeot.me/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="http://grapeot.me/theme/js/libs/gumby.min.js"></script>
  <script src="http://grapeot.me/theme/js/plugins.js"></script>

</body>
</html>